@page "/"
@using System.Reflection

@foreach (var source in imageSources)
{
    <img src='@source' height="200" width="200"/>    
}




@code{
    private List<string> imageSources = new List<string>();


    protected override void OnInitialized()
    {
       var items = new List<string>();
        Assembly a = Assembly.GetExecutingAssembly();
        var exercises = new List<string>();
        foreach (var resource in a.GetManifestResourceNames())
        {
            if (!resource.Contains("Exercises"))
                continue;
            exercises.Add(resource);
        }
        imageSources = exercises.Select(x => ImageService.Instance.GetImage(x)).ToList();
    }

    private string GetPrefix(string x)
    {
        int firstIndex = x.IndexOf("Exercises.") + "Exercises.".Length;
        int secondIndex = x.IndexOf(".", firstIndex);
        return x.Substring(firstIndex, secondIndex - firstIndex);
    }

    private string GetPath(string x)
    {
        int firstIndex = x.LastIndexOf(".");
        int secondIndex = x.LastIndexOf(".", firstIndex - 1) + 1;
        return x.Substring(secondIndex);
    }
}
